<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section>
        <div class="bg" id="bgg"></div>
        <div class="link"><a href="#" class="subLink" target="_blank">EXPLORE</a></div>
        <header>
            <a href="#" class="logo"></a>
            <ul class="nav">
                <li><a href="#" class="active">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Tems of Use</a></li>
            </ul>
        </header>
        
        
        <div class="content">
            <div class="textBox">
            </div>
            <!----
            <div class="imgBox">
                <img src="apple.png" class="fruits">
            </div>-->
        </div>
        <ul class="thumb">
            
            <li data-text="Tokyo"><div class="item" onclick="changColor('img/tokyo1.jpg'); changeLink('smallSite/tokyo.html');"><div class="smallImage"><img src="small/tokyo.png" ></div>
                <div class="nameCity"><h2>Tokyo</h2><p>the political and economic center</p></div></div></li>
            <li data-text="Hokkaido"><div class="item" onclick="changColor('img/osaka1.jpg'); changeLink('smallSite/osaka.html');"><div class="smallImage"><img src="small/osaka.png" ></div>
                <div class="nameCity"><h2>Osaka</h2><p>the street food capital of Japan</p></div></div></li>
            <li data-text="Osaka"><div class="item" onclick="changColor('img/kyoto1.jpg'); changeLink('smallSite/kyoto.html');"><div class="smallImage"><img src="small/kyoto.png" ></div>
                <div class="nameCity"><h2>Kyoto</h2><p>the former capital of Japan</p></div></div></li>
            <li data-text="Nara"><div class="item" onclick="changColor('img/nara1.jpg'); changeLink('smallSite/nara.html');"><div class="smallImage"><img src="small/nara.png" ></div>
                <div class="nameCity"><h2>Nara</h2><p>another historic Japanese capital</p></div></div></li>
        </ul>
        <ul class="sci">
            <li><a href="#"><img src="img/facebook.png"></a></li>
            <li><a href="#"><img src="img/instagram.png"></a></li>
            <li><a href="#"><img src="img/twitter.png"></a></li>
        </ul>
    </section>
    <script type="text/javascript">
        // City data array
        const cities = [
            {
                name: 'Tokyo',
                image: 'img/tokyo1.jpg',
                link: 'smallSite/tokyo.html',
                description: 'the political and economic center'
            },
            {
                name: 'Osaka', 
                image: 'img/osaka1.jpg',
                link: 'smallSite/osaka.html',
                description: 'the street food capital of Japan'
            },
            {
                name: 'Kyoto',
                image: 'img/kyoto1.jpg', 
                link: 'smallSite/kyoto.html',
                description: 'the former capital of Japan'
            },
            {
                name: 'Nara',
                image: 'img/nara1.jpg',
                link: 'smallSite/nara.html', 
                description: 'another historic Japanese capital'
            }
        ];

        let currentCityIndex = -1; // Start with -1 to indicate Japan main page
        let autoSlideInterval;
        let isUserInteracting = false;

        // change background with glitch effect
        function changColor(anything, withGlitch = false){
            const bg = document.querySelector('.bg');
            
            if(withGlitch) {
                // Add glitch effect
                bg.classList.add('glitch');
                
                // Remove glitch class after animation
                setTimeout(() => {
                    bg.classList.remove('glitch');
                }, 800);
            }
            
            bg.style.backgroundImage = "url( " + anything + " )";
        }

        function changeLink(something){
            document.querySelector('.link').style.opacity = 1;
            document.querySelector('.subLink').href = something;
        }

        // Add glitch effect to city name text
        function addTextGlitch(cityName) {
            const activeCity = document.querySelector('.thumb li.active .nameCity h2');
            if(activeCity) {
                activeCity.classList.add('glitch-text');
                setTimeout(() => {
                    activeCity.classList.remove('glitch-text');
                }, 600);
            }
        }

        // Auto slide function
        function autoSlideToNextCity() {
            if(isUserInteracting) return;
            
            // If this is the first auto slide (currentCityIndex is still -1), start with Tokyo (index 0)
            if(currentCityIndex === -1) {
                currentCityIndex = 0;
            } else {
                currentCityIndex = (currentCityIndex + 1) % cities.length;
            }
            
            const currentCity = cities[currentCityIndex];
            
            // Apply glitch effect and change city
            changColor(currentCity.image, true);
            changeLink(currentCity.link);
            
            // Update active class
            const el = document.querySelectorAll('.thumb li');
            el.forEach((item, index) => {
                item.className = 'check';
                if(index === currentCityIndex) {
                    item.className = 'check active';
                }
            });
            
            // Add text glitch effect
            setTimeout(() => {
                addTextGlitch(currentCity.name);
            }, 200);
        }

        // Start auto slide
        function startAutoSlide() {
            autoSlideInterval = setInterval(autoSlideToNextCity, 5000); // 5 seconds
        }

        // Stop auto slide 
        function stopAutoSlide() {
            if(autoSlideInterval) {
                clearInterval(autoSlideInterval);
            }
        }

        // Reset auto slide
        function resetAutoSlide() {
            stopAutoSlide();
            setTimeout(() => {
                if(!isUserInteracting) {
                    startAutoSlide();
                }
            }, 10000); // Wait 10 seconds before resuming auto slide
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Keep default Japan background (img/japan1.jpg) - don't set any city as active initially
            // Hide the EXPLORE link initially
            document.querySelector('.link').style.opacity = 0;

            // Start auto slide after 5 seconds - will start with first city (Tokyo)
            setTimeout(startAutoSlide, 5000);
        });

        //add active class and handle user interaction
        let el = document.querySelectorAll('.thumb li');
        for(let i=0;i< el.length;i++){
            el[i].onclick= function(){
                // User is interacting
                isUserInteracting = true;
                stopAutoSlide();
                
                // Remove active class from all items
                var c=0;
                while(c < el.length){
                    el[c++].className='check';
                }
                // Add active class to clicked item
                el[i].className='check active';
                
                // Update current index
                currentCityIndex = i;
                
                // Show the EXPLORE link
                changeLink(cities[i].link);
                
                // Add glitch effect for user interaction
                setTimeout(() => {
                    addTextGlitch(cities[i].name);
                }, 100);
                
                // Reset user interaction flag and restart auto slide
                setTimeout(() => {
                    isUserInteracting = false;
                    resetAutoSlide();
                }, 1000);
            }
        }

        // Pause auto slide when user hovers over thumbnails
        const thumbContainer = document.querySelector('.thumb');
        if(thumbContainer) {
            thumbContainer.addEventListener('mouseenter', () => {
                isUserInteracting = true;
                stopAutoSlide();
            });
            
            thumbContainer.addEventListener('mouseleave', () => {
                setTimeout(() => {
                    isUserInteracting = false;
                    startAutoSlide();
                }, 2000);
            });
        }
    </script>
</body>
</html>